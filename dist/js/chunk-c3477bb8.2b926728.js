(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3477bb8"],{"6b87":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-table",e._g(e._b({attrs:{rowKey:e.rowKey,columns:e.columns,dataSource:e.dataSource,expandedRowKeys:e.expandedRowKeys},on:{expand:e.handleExpand,expandedRowsChange:function(t){e.expandedRowKeys=t}},scopedSlots:e._u([e._l(e.slots,(function(t){return{key:t,fn:function(n,r,a){return[e._t(t,null,null,{text:n,record:r,index:a})]}}}))],null,!0)},"a-table",e.tableAttrs,!1),e.$listeners))},a=[],o=n("bd86"),i=(n("ac4d"),n("8a81"),n("ac6a"),n("0fea")),l={name:"JTreeTable",props:{rowKey:{type:String,default:"id"},queryKey:{type:String,default:"parentId"},queryParams:{type:Object,default:function(){return{}}},topValue:{type:String,default:null},columns:{type:Array,required:!0},url:{type:String,required:!0},childrenUrl:{type:String,default:null},tableProps:{type:Object,default:function(){return{}}},immediateRequest:{type:Boolean,default:!0},condition:{type:String,default:"",required:!1}},data:function(){return{dataSource:[],expandedRowKeys:[]}},computed:{getChildrenUrl:function(){return this.childrenUrl?this.childrenUrl:this.url},slots:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=this.columns[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;i.scopedSlots&&i.scopedSlots.customRender&&e.push(i.scopedSlots.customRender)}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},tableAttrs:function(){return Object.assign(this.$attrs,this.tableProps)}},watch:{queryParams:{deep:!0,handler:function(){this.loadData()}}},created:function(){this.immediateRequest&&this.loadData()},methods:{loadData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.topValue,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.url;this.$emit("requestBefore",{first:n}),n&&(this.expandedRowKeys=[]);var a=Object.assign({},this.queryParams||{});return a[this.queryKey]=t,this.condition&&this.condition.length>0&&(a["condition"]=this.condition),Object(i["getAction"])(r,a).then((function(t){var r=[];if(t.result instanceof Array)r=t.result;else{if(!(t.result.records instanceof Array))throw"返回数据类型不识别";r=t.result.records}var a=r.map((function(t){if(!0===t.hasChildren){var n,r,a=!0,i=!1,l=void 0;try{for(var s,u=e.columns[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if(r=d.dataIndex,r)break}}catch(f){i=!0,l=f}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}var c=(n={id:"".concat(t.id,"_loadChild")},Object(o["a"])(n,r,"loading..."),Object(o["a"])(n,"isLoading",!0),n);t.children=[c]}return t}));return n&&(e.dataSource=a),e.$emit("requestSuccess",{first:n,dataSource:a,res:t}),Promise.resolve(a)})).finally((function(){return e.$emit("requestFinally",{first:n})}))},handleExpand:function(e,t){e&&!0===t.children[0].isLoading&&this.loadData(t.id,!1,this.getChildrenUrl).then((function(e){0===e.length?t.children=null:t.children=e}))}}},s=l,u=n("2877"),d=Object(u["a"])(s,r,a,!1,null,"ba3bd2be",null);t["default"]=d.exports},da9b:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("j-tree-table",{attrs:{url:e.url,topValue:"0",queryKey:"id",columns:e.columns,tableProps:e.tableProps},scopedSlots:e._u([{key:"action",fn:function(t){return[n("a",{on:{click:function(){return e.handleEdit(t.record)}}},[e._v("编辑")])]}}])})],1)},a=[],o=(n("7f7f"),n("6b87")),i={name:"JeecgTreeTable",components:{JTreeTable:o["default"]},data:function(){return{url:"/api/asynTreeList",columns:[{title:"菜单名称",dataIndex:"name"},{title:"组件",dataIndex:"component"},{title:"排序",dataIndex:"orderNum"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],selectedRowKeys:[]}},computed:{tableProps:function(){var e=this;return{rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:function(t){return e.selectedRowKeys=t}}}}},methods:{handleEdit:function(e){this.$info({width:600,title:"编辑",content:"编辑ID："+e.id+"；名称："+e.name,okText:"确定",maskClosable:!0})}}},l=i,s=n("2877"),u=Object(s["a"])(l,r,a,!1,null,"2090c591",null);t["default"]=u.exports}}]);